<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Calendar App</title>

<style>
body{
    margin:0;
    font-family:Arial;
    display:flex;
    height:100vh;
}

/* LEFT PANEL */
.left{
    width:25%;
    background:#0d2b36;
    color:white;
    padding:20px;
}

/* CENTER CALENDAR */
.center{
    width:50%;
    display:flex;
    justify-content:center;
    align-items:center;
    background:#f4f4f4;
}

/* RIGHT TASK PANEL */
.right{
    width:25%;
    background:#e9e9e9;
    padding:20px;
    display:none;
    flex-direction:column;
}

.calendar{
    background:white;
    padding:20px;
    border-radius:10px;
    width:320px;
}

.header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:10px;
}

.days, .dates{
    display:grid;
    grid-template-columns:repeat(7,1fr);
    text-align:center;
}

.dates div{
    padding:10px;
    cursor:pointer;
}

.dates div:hover{
    background:#ddd;
    border-radius:50%;
}

.selected{
    background:black;
    color:white;
    border-radius:50%;
}

/* calculator */
.calc input{
    width:100%;
    height:40px;
    margin-bottom:10px;
    font-size:18px;
}

.calc button{
    width:23%;
    margin:1%;
    height:40px;
    font-size:16px;
}

/* stopwatch */
.stopwatch{
    margin-top:30px;
}

.stopwatch button{
    margin:5px;
}
</style>
</head>

<body>

<!-- LEFT -->
<div class="left">

<h3>Calculator</h3>
<div class="calc">
<input type="text" id="calcScreen">
<br>
<button onclick="addCalc('7')">7</button>
<button onclick="addCalc('8')">8</button>
<button onclick="addCalc('9')">9</button>
<button onclick="addCalc('/')">/</button>

<button onclick="addCalc('4')">4</button>
<button onclick="addCalc('5')">5</button>
<button onclick="addCalc('6')">6</button>
<button onclick="addCalc('*')">*</button>

<button onclick="addCalc('1')">1</button>
<button onclick="addCalc('2')">2</button>
<button onclick="addCalc('3')">3</button>
<button onclick="addCalc('-')">-</button>

<button onclick="addCalc('0')">0</button>
<button onclick="calculate()">=</button>
<button onclick="clearCalc()">C</button>
<button onclick="addCalc('+')">+</button>
</div>

<h3>Stopwatch</h3>
<div class="stopwatch">
<h2 id="time">00:00:00</h2>
<button onclick="start()">Start</button>
<button onclick="stop()">Stop</button>
<button onclick="reset()">Reset</button>
</div>

</div>

<!-- CENTER -->
<div class="center">

<div class="calendar">
<div class="header">
<button onclick="changeMonth(-1)"><</button>
<h2 id="monthYear"></h2>
<button onclick="changeMonth(1)">></button>
</div>

<div class="days">
<div>Sun</div><div>Mon</div><div>Tue</div>
<div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
</div>

<div class="dates" id="dates"></div>
</div>

</div>

<!-- RIGHT -->
<div class="right" id="taskPanel">
<h3 id="selectedDate"></h3>
<input type="text" id="taskInput" placeholder="Add task">
<button onclick="saveTask()">Save Task</button>
<ul id="taskList"></ul>
</div>

<script>

/* CALENDAR */
let date = new Date();
let currentMonth = date.getMonth();
let currentYear = date.getFullYear();
let selectedDateKey = "";

function renderCalendar(){
    const monthYear = document.getElementById("monthYear");
    const dates = document.getElementById("dates");
    dates.innerHTML = "";

    const firstDay = new Date(currentYear, currentMonth, 1).getDay();
    const lastDate = new Date(currentYear, currentMonth+1, 0).getDate();

    monthYear.innerText = 
        new Date(currentYear, currentMonth)
        .toLocaleString("default",{month:"long"}) 
        + " " + currentYear;

    for(let i=0;i<firstDay;i++){
        dates.innerHTML += "<div></div>";
    }

    for(let i=1;i<=lastDate;i++){
        let div = document.createElement("div");
        div.innerText = i;
        div.onclick = () => selectDate(i);
        dates.appendChild(div);
    }
}

function changeMonth(step){
    currentMonth += step;
    if(currentMonth < 0){
        currentMonth = 11;
        currentYear--;
    }
    if(currentMonth > 11){
        currentMonth = 0;
        currentYear++;
    }
    renderCalendar();
}

function selectDate(day){
    selectedDateKey = currentYear+"-"+currentMonth+"-"+day;
    document.getElementById("taskPanel").style.display="flex";
    document.getElementById("selectedDate").innerText =
        day + " " +
        new Date(currentYear,currentMonth)
        .toLocaleString("default",{month:"long"}) +
        " " + currentYear;
    loadTasks();
}

/* TASK SYSTEM */

function saveTask(){
    let input = document.getElementById("taskInput");
    if(input.value==="") return;

    let tasks = JSON.parse(localStorage.getItem(selectedDateKey)) || [];
    tasks.push(input.value);
    localStorage.setItem(selectedDateKey, JSON.stringify(tasks));
    input.value="";
    loadTasks();
}

function loadTasks(){
    let taskList = document.getElementById("taskList");
    taskList.innerHTML="";
    let tasks = JSON.parse(localStorage.getItem(selectedDateKey)) || [];
    tasks.forEach(task=>{
        let li = document.createElement("li");
        li.innerText = task;
        taskList.appendChild(li);
    });
}

/* CALCULATOR */

function addCalc(val){
    document.getElementById("calcScreen").value += val;
}

function calculate(){
    let screen = document.getElementById("calcScreen");
    screen.value = eval(screen.value);
}

function clearCalc(){
    document.getElementById("calcScreen").value="";
}

/* STOPWATCH */

let seconds=0;
let interval;

function start(){
    interval = setInterval(()=>{
        seconds++;
        updateTime();
    },1000);
}

function stop(){
    clearInterval(interval);
}

function reset(){
    clearInterval(interval);
    seconds=0;
    updateTime();
}

function updateTime(){
    let hrs = Math.floor(seconds/3600);
    let mins = Math.floor((seconds%3600)/60);
    let secs = seconds%60;
    document.getElementById("time").innerText =
        String(hrs).padStart(2,'0')+":"+
        String(mins).padStart(2,'0')+":"+
        String(secs).padStart(2,'0');
}

renderCalendar();

</script>

</body>
</html>