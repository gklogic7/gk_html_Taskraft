<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Apple Glass Planner</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{
  box-sizing:border-box;
  margin:0;
  padding:0;
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
}

body{
  background:linear-gradient(135deg,#0f2027,#2c5364,#1c1c1c);
  color:white;
  min-height:100vh;
  padding:20px;
}

.app{
  display:flex;
  gap:20px;
  max-width:1400px;
  margin:auto;
}

.glass{
  backdrop-filter:blur(20px);
  background:rgba(255,255,255,0.08);
  border:1px solid rgba(255,255,255,0.15);
  border-radius:20px;
  padding:20px;
  box-shadow:0 8px 32px rgba(0,0,0,0.4);
}

/* Left Tools */
.tools{
  flex:1;
  display:flex;
  flex-direction:column;
  gap:20px;
}

/* Calendar */
.calendar{ flex:1; }

.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:20px;
}

.header button{
  background:none;border:none;color:white;font-size:22px;cursor:pointer;
}

.days,.dates{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  text-align:center;
}

.days div{opacity:0.6;margin-bottom:10px;}

.dates div{
  padding:12px;
  border-radius:50%;
  cursor:pointer;
  position:relative;
}

.dates div:hover{background:rgba(255,255,255,0.1);}
.selected{background:rgba(255,255,255,0.25);}

.dot{
  width:6px;height:6px;background:#4cd964;
  border-radius:50%;
  position:absolute;bottom:5px;left:50%;
  transform:translateX(-50%);
}

/* Tasks */
.tasks{
  flex:1;
  overflow-y:auto;
}

textarea,input{
  width:100%;
  margin-top:10px;
  padding:10px;
  border:none;
  border-radius:12px;
  background:rgba(255,255,255,0.1);
  color:white;
}

button.save{
  margin-top:10px;
  padding:10px;
  border:none;
  border-radius:12px;
  background:linear-gradient(45deg,#4cd964,#5ac8fa);
  cursor:pointer;
  font-weight:bold;
}

ul{list-style:none;margin-top:15px;}

li{
  background:rgba(255,255,255,0.08);
  padding:12px;
  border-radius:15px;
  margin-bottom:12px;
}

.completed{opacity:0.5;text-decoration:line-through;}

.meta{font-size:12px;opacity:0.6;margin-top:5px;}

.actions button{
  background:none;border:none;color:#5ac8fa;
  margin-right:10px;cursor:pointer;
}

/* Calculator */
.calc input{
  margin-bottom:10px;
  text-align:right;
  font-size:18px;
}

.calc button{
  width:23%;
  margin:1%;
  padding:10px;
  border:none;
  border-radius:10px;
  background:rgba(255,255,255,0.15);
  color:white;
  cursor:pointer;
}

/* Stopwatch */
.stopwatch h2{margin-bottom:10px;}
.stopwatch button{
  padding:6px 10px;
  border:none;
  border-radius:10px;
  background:rgba(255,255,255,0.15);
  color:white;
  margin-right:5px;
  cursor:pointer;
}

/* Responsive */
@media(max-width:900px){
  .app{flex-direction:column;}
}
</style>
</head>

<body>

<div class="app">

<!-- LEFT SIDE TOOLS -->
<div class="tools">

<div class="glass calc">
<h3>Calculator</h3>
<input type="text" id="calcScreen">
<div>
<button onclick="addCalc('7')">7</button>
<button onclick="addCalc('8')">8</button>
<button onclick="addCalc('9')">9</button>
<button onclick="addCalc('/')">/</button>

<button onclick="addCalc('4')">4</button>
<button onclick="addCalc('5')">5</button>
<button onclick="addCalc('6')">6</button>
<button onclick="addCalc('*')">*</button>

<button onclick="addCalc('1')">1</button>
<button onclick="addCalc('2')">2</button>
<button onclick="addCalc('3')">3</button>
<button onclick="addCalc('-')">-</button>

<button onclick="addCalc('0')">0</button>
<button onclick="calculate()">=</button>
<button onclick="clearCalc()">C</button>
<button onclick="addCalc('+')">+</button>
</div>
</div>

<div class="glass stopwatch">
<h3>Stopwatch</h3>
<h2 id="time">00:00:00</h2>
<button onclick="start()">Start</button>
<button onclick="stop()">Stop</button>
<button onclick="reset()">Reset</button>
</div>

</div>

<!-- CENTER CALENDAR -->
<div class="glass calendar">
<div class="header">
<button onclick="changeMonth(-1)">‚Äπ</button>
<h2 id="monthYear"></h2>
<button onclick="changeMonth(1)">‚Ä∫</button>
</div>

<div class="days">
<div>Sun</div><div>Mon</div><div>Tue</div>
<div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
</div>

<div class="dates" id="dates"></div>
</div>

<!-- RIGHT TASKS -->
<div class="glass tasks">
<h3 id="selectedDate">Select Date</h3>

<textarea id="taskInput" placeholder="Write task with emoji üòä"></textarea>
<input type="time" id="taskTime">
<button class="save" onclick="saveTask()">Save Task</button>

<ul id="taskList"></ul>
</div>

</div>

<script>
let now=new Date();
let currentMonth=now.getMonth();
let currentYear=now.getFullYear();
let selectedKey="";

function renderCalendar(){
  const dates=document.getElementById("dates");
  dates.innerHTML="";
  document.getElementById("monthYear").innerText=
  new Date(currentYear,currentMonth)
  .toLocaleString("default",{month:"long"})+" "+currentYear;

  let firstDay=new Date(currentYear,currentMonth,1).getDay();
  let lastDate=new Date(currentYear,currentMonth+1,0).getDate();

  for(let i=0;i<firstDay;i++) dates.innerHTML+="<div></div>";

  for(let d=1;d<=lastDate;d++){
    let div=document.createElement("div");
    div.innerText=d;
    div.onclick=()=>selectDate(d);

    let key=currentYear+"-"+currentMonth+"-"+d;
    let tasks=JSON.parse(localStorage.getItem(key))||[];
    if(tasks.length>0){
      let dot=document.createElement("div");
      dot.className="dot";
      div.appendChild(dot);
    }

    dates.appendChild(div);
  }
}

function changeMonth(step){
  currentMonth+=step;
  if(currentMonth<0){currentMonth=11;currentYear--;}
  if(currentMonth>11){currentMonth=0;currentYear++;}
  renderCalendar();
}

function selectDate(d){
  selectedKey=currentYear+"-"+currentMonth+"-"+d;
  document.getElementById("selectedDate").innerText=
  d+" "+
  new Date(currentYear,currentMonth)
  .toLocaleString("default",{month:"long"})+" "+currentYear;
  loadTasks();
}

function saveTask(){
  if(!selectedKey)return;
  let text=document.getElementById("taskInput").value;
  let time=document.getElementById("taskTime").value;
  if(!text)return;

  let tasks=JSON.parse(localStorage.getItem(selectedKey))||[];

  tasks.push({
    text:text,
    time:time,
    created:new Date().toLocaleString(),
    completed:null,
    done:false
  });

  localStorage.setItem(selectedKey,JSON.stringify(tasks));
  document.getElementById("taskInput").value="";
  loadTasks();
  renderCalendar();
}

function loadTasks(){
  let list=document.getElementById("taskList");
  list.innerHTML="";
  let tasks=JSON.parse(localStorage.getItem(selectedKey))||[];

  tasks.forEach((task,i)=>{
    let li=document.createElement("li");
    if(task.done) li.classList.add("completed");

    li.innerHTML=`
    <div contenteditable="true" onblur="editTask(${i},this.innerText)">
    ${task.text}
    </div>
    <div>‚è∞ ${task.time||"No time"}</div>
    <div class="meta">
    Created: ${task.created}<br>
    Completed: ${task.completed||"-"}
    </div>
    <div class="actions">
      <button onclick="toggleDone(${i})">‚úì</button>
      <button onclick="deleteTask(${i})">üóë</button>
    </div>
    `;
    list.appendChild(li);
  });
}

function editTask(i,newText){
  let tasks=JSON.parse(localStorage.getItem(selectedKey));
  tasks[i].text=newText;
  localStorage.setItem(selectedKey,JSON.stringify(tasks));
}

function toggleDone(i){
  let tasks=JSON.parse(localStorage.getItem(selectedKey));
  tasks[i].done=!tasks[i].done;
  tasks[i].completed=tasks[i].done?new Date().toLocaleString():null;
  localStorage.setItem(selectedKey,JSON.stringify(tasks));
  loadTasks();
}

function deleteTask(i){
  let tasks=JSON.parse(localStorage.getItem(selectedKey));
  tasks.splice(i,1);
  localStorage.setItem(selectedKey,JSON.stringify(tasks));
  loadTasks();
  renderCalendar();
}

/* Calculator */
function addCalc(v){document.getElementById("calcScreen").value+=v;}
function calculate(){
  try{
    document.getElementById("calcScreen").value=
    eval(document.getElementById("calcScreen").value);
  }catch{alert("Invalid");}
}
function clearCalc(){document.getElementById("calcScreen").value="";}

/* Stopwatch */
let sec=0,interval;
function start(){if(!interval){interval=setInterval(()=>{sec++;update();},1000);}}
function stop(){clearInterval(interval);interval=null;}
function reset(){stop();sec=0;update();}
function update(){
  let h=Math.floor(sec/3600);
  let m=Math.floor((sec%3600)/60);
  let s=sec%60;
  document.getElementById("time").innerText=
  String(h).padStart(2,'0')+":"+
  String(m).padStart(2,'0')+":"+
  String(s).padStart(2,'0');
}

renderCalendar();
</script>

</body>
</html>